<div *ngIf="data$ | async as data; else loading">
  <mat-table [dataSource]="data" class="mat-elevation-18">
    <ng-container matColumnDef="id">
      <mat-header-cell mat-header-cell *matHeaderCellDef>ID</mat-header-cell>
      <mat-cell mat-cell *matCellDef="let coin"> {{coin.id}} </mat-cell>
    </ng-container>

    <ng-container matColumnDef="name">
      <mat-header-cell mat-header-cell *matHeaderCellDef>Name</mat-header-cell>
      <mat-cell mat-cell *matCellDef="let coin"> {{coin.name}} </mat-cell>
    </ng-container>

    <ng-container matColumnDef="price">
      <mat-header-cell mat-header-cell *matHeaderCellDef>Price</mat-header-cell>
      <mat-cell mat-cell *matCellDef="let coin"> {{coin.current_price}} $ </mat-cell>
    </ng-container>

    <ng-container matColumnDef="market_cap">
      <mat-header-cell mat-header-cell *matHeaderCellDef>Market Cap</mat-header-cell>
      <mat-cell mat-cell *matCellDef="let coin"> {{coin.market_cap}} </mat-cell>
    </ng-container>

    <ng-container matColumnDef="total_volume">
      <mat-header-cell mat-header-cell *matHeaderCellDef>Total Volume</mat-header-cell>
      <mat-cell mat-cell *matCellDef="let coin"> {{coin.total_volume}} </mat-cell>
    </ng-container>

    <ng-container matColumnDef="high_24h">
      <mat-header-cell mat-header-cell *matHeaderCellDef>High of last 24h</mat-header-cell>
      <mat-cell mat-cell *matCellDef="let coin"> {{coin.high_24h}} </mat-cell>
    </ng-container>

    <ng-container matColumnDef="low_24h">
      <mat-header-cell mat-header-cell *matHeaderCellDef>Low of last 24h</mat-header-cell>
      <mat-cell mat-cell *matCellDef="let coin"> {{coin.low_24h}} </mat-cell>
    </ng-container>

    <ng-container matColumnDef="price_change_percentage_24h">
      <mat-header-cell mat-header-cell *matHeaderCellDef>Price Change (%)</mat-header-cell>
      <mat-cell mat-cell *matCellDef="let coin"> {{coin.price_change_percentage_24h}} %</mat-cell>
    </ng-container>

    <ng-container matColumnDef="circulating_supply">
      <mat-header-cell mat-header-cell *matHeaderCellDef>Circulating Supply</mat-header-cell>
      <mat-cell mat-cell *matCellDef="let coin"> {{coin.circulating_supply}} </mat-cell>
    </ng-container>

    <mat-row mat-header-row *matHeaderRowDef="displayedColumns"></mat-row>
    <mat-row mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>
  </mat-table>  
</div>
<ng-template #loading>
  <p>Loading...</p>
</ng-template>